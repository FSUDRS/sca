<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="/sca/assets/css/CETEIcean.css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/sca/assets/css/custom.css" media="screen" charset="utf-8">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="navbg">
  <div class="container">
    <ul class="nav">
      <li><a href="/sca/">Home</a></li>
      <div class="dropdown">
         <button class="dropbtn">Collections<i class="fa fa-caret-down"></i></button>
         <div class="dropdown-content">
           <a href="/sca/herbals">Cookbooks and Herbals</a>
           <a href="/sca/correspondence">Correspondence</a>
         </div>
      </div>
      <li><a href="/sca/about">About</a></li>
      <li><a href="/sca/search">Search</a></li>
    </ul>
  </div>
</div>

    <header>
          <h1>FSU Special Collections and Archives Transcriptions</h1>
     </header>
    <div class="container">
      <div id="content">
        <div id="TEI">
</div>
<script src="/sca/assets/js/CETEI.js"></script>
<script>
function marking(match){
    return "<mark>" + match +"</mark>";
}
function highlight(){
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const query = urlParams.get('q')
    const queryReg = "\w*" + query + "\w*"
    el = document.getElementById("TEI")
    text = el.innerHTML
    const re = new RegExp(queryReg, "ig")
    console.log(re)
    marked = text.replace(re, marking);
    el.innerHTML = marked;
}
  var CETEIcean = new CETEI();
  CETEIcean.getHTML5("/sca/TEI/correspondence/fsu559928.xml", function (data) {
    //parse out data variable
    document.getElementById("TEI").innerHTML = "";
    document.getElementById("TEI").appendChild(data);
    CETEIcean.addStyle(document, data);
    highlight();
  });

    // Alternatively, use then()
    // (new CETEI).getHTML5('testTEI.xml').then(function(data){
    //   document.getElementById("TEI").appendChild(data);
    // });

</script>
<script src="https://hypothes.is/embed.js"></script>
<!--<script src="/sca/assets/js/highlight.js"></script>-->
      </div> 
    </div>
    <div id="footer">
    <div class="container">
      <p id="test">This site and these translations are published under a <a href="https://creativecommons.org/licenses/by/2.0/">Creative Commons Attribution 2.0 Generic (CC BY 2.0)</a> License</p>
      </div>
  </div>
  </body>
 
  <script src="/sca/assets/js/resize.js" type="text/javascript" ></script>
</html>
